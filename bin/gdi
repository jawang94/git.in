#!/usr/bin/env node

const helpMessage = require('../dist/src/help');
const logs = require('../dist/src/utils/logging');

const opts = process.argv.slice(2);

// Prints help message
if (opts.indexOf('-h') > -1) {
  logs.logInfo(helpMessage);

} else {

  // Starts interactive branch listing and listen for feedback
  var gci = require('../dist/src/git-checkout-interactive.js')(opts);

  gci.on('warn', logs.logWarn);
  gci.on('error', logs.logError);
  gci.on('success', logs.logSuccess);

  // Exits program execution on ESC keypress
  process.stdin.on('keypress', function (ch, key) {
    if (key && (key.name === 'escape' || key.name === 'q')) {
      process.exit();
    }
  });
}
